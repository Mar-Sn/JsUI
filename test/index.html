<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <link rel="stylesheet" href="css/panel.css" type="text/css">
    <link rel="stylesheet" href="css/table.css" type="text/css">
    <link rel="stylesheet" href="css/button.css" type="text/css">
    <script type="application/javascript" src="/lib/requirejs.js"></script>
    <script>
        require.config({
            baseUrl: 'lib',
            paths: {
                jquery: 'jquery.min',
                Random: 'random',
                Popup: 'popup',
                Input: 'input',
                FieldSetInput: 'fieldset_input',
                Button: 'button',
                Grid: 'grid',
                Table: 'table',
                Panel: 'panel',
                Component: 'component',
                TableComponent: 'table_component',
                Draggable: 'libs/table-dragger/table-dragger.min',
                Moments: 'libs/moment-timezone/moment-timezone.min'
            }
        });
        require(['jquery', 'Popup', 'Panel', 'FieldSetInput', 'Table', 'Button', 'Grid', 'TableComponent'], function ($, Popup, Panel, FieldSetInput, Table, Button, Grid, TableComponent) {
            var popup = new Popup.Popup("test", function () {
                //onclose
                alert("popup closed");
            });
            var panel = new Panel.Panel("Panel1", "input test");

            var input = new FieldSetInput.FieldSetInput('name', 'text', '', 'simple description', 'some classes', '');
            input.onChange(function (data) {
                console.log(data);
            });
            panel.append(input);

            var panel1 = new Panel.Panel("Panel2", "table test");


            var object = [{name: "", sub: {}}, {name: "", sub: {}}];

            var table = new Table.Table([
                "text",
                "number",
                "date",
                "boolean",
                "text sub",
                "number sub",
                "boolean sub",
            ], "", object);


            var table2 = new Table.Table(['custom component']);
            var table_button = new Button.Button("another test",'', function () {
                alert('button works from table');

            });
            table2.addRow([
                {
                    type: "readonly",
                    key: '',
                    value: '',
                    component: table_button
                }]);


            table.addRows([[
                {type: "text", key: 'name', value: object[0].name, mappedValue: object[0]},
                {type: "number", key: 'number', value: object[0].number, mappedValue: object[0]},
                {type: "datetime", key: 'datetime', value: object[0].datetime, mappedValue: object[0]},
                {type: "boolean", key: 'boolean', value: object[0].boolean, mappedValue: object[0]},

                {type: "text", key: 'name', value: object[0].sub.name, mappedValue: object[0].sub},
                {type: "number", key: 'number', value: object[0].sub.number, mappedValue: object[0].sub},
                {type: "datetime", key: 'datetime', value: object[0].sub.datetime, mappedValue: object[0].sub},
                {type: "boolean", key: 'boolean', value: object[0].sub.boolean, mappedValue: object[0].sub}
            ], [
                {type: "text", key: 'name', value: object[1].name, mappedValue: object[1]},
                {type: "number", key: 'number', value: object[1].number, mappedValue: object[1]},
                {type: "date", key: 'date', value: object[1].date, mappedValue: object[1]},
                {type: "boolean", key: 'boolean', value: object[1].boolean, mappedValue: object[1]},

                {type: "text", key: 'name', value: object[1].sub.name, mappedValue: object[1].sub},
                {type: "number", key: 'number', value: object[1].sub.number, mappedValue: object[1].sub},
                {type: "date", key: 'date', value: object[1].sub.date, mappedValue: object[1].sub},
                {type: "boolean", key: 'boolean', value: object[1].sub.boolean, mappedValue: object[1].sub},
            ]]);
            panel1.set(table);


            var panel2 = new Panel.Panel("Panel2", "table test");
            panel2.set(new Button.Button("test", '', function () {
                alert('button works');
            }));


            var panel3 = new Panel.Panel("Panel3", "Test custom compontent");
            panel3.set(table2);

            popup.append(panel);
            popup.append(panel1);
            popup.append(panel2);
            popup.append(panel3);


            var panel4 = new Panel.Panel("Panel 4", "Test grid");


            var gridDate = [];

            var grid = new Grid.Grid('grid', gridDate);
            panel4.set(grid);
            popup.append(panel4);


            popup.show();

            window.testObject = object;
        });
    </script>
</head>
<body>

</body>
</html>