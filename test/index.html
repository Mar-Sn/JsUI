<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script type="application/javascript" src="/lib/requirejs.js"></script>
    <script>
        require.config({
            baseUrl: 'lib',
            paths: {
                jquery: 'jquery.min',
                Random:  'random',
                Popup:  'popup',
                Input:  'input',
                FieldSetInput:  'fieldset_input',
                Button:  'button',
                Table:  'table',
                Panel:  'panel',
                Component:  'component',
                TableComponent:  'table_compontent',
                Draggable:  'table-dragger.min',
                Moments: 'moment-timezone.min'
            }
        });
        require(['jquery','Popup', 'Panel', 'FieldSetInput', 'Table', 'Button'], function ($, Popup, Panel, FieldSetInput, Table, Button) {
            var popup = new Popup.Popup("test",function(){
               //onclose
               alert("popup closed");
            });
            var panel = new Panel.Panel("Panel1", "input test");

            var input = new FieldSetInput.FieldSetInput('name', 'text', '', 'simple description', 'some classes', '');
            input.onChange(function(data){
                console.log(data);
            });
            panel.append(input);

            var panel1 = new Panel.Panel("Panel2", "table test");

            var table = new Table.Table([
                "text",
                "number",
                "date",
                "boolean",
                "text sub",
                "number sub",
                "boolean sub",
            ], "");
            
            var object = {sub:{}};

            
            table.addRows([[
                {type:"text", key: 'name', value: object.name, mappedValue: object},
                {type:"number", key: 'number', value: object.number, mappedValue: object},
                {type:"datetime", key: 'datetime', value: object.datetime, mappedValue: object},
                {type:"boolean", key: 'boolean', value: object.boolean, mappedValue: object},

                {type:"text", key: 'name', value: object.sub.name, mappedValue: object.sub},
                {type:"number", key: 'number', value: object.sub.number, mappedValue: object.sub},
                {type:"datetime", key: 'datetime', value: object.sub.datetime, mappedValue: object.sub},
                {type:"boolean", key: 'boolean', value: object.sub.boolean, mappedValue: object.sub},
            ],[
                {type:"text", key: 'name', value: object.name, mappedValue: object},
                {type:"number", key: 'number', value: object.number, mappedValue: object},
                {type:"date", key: 'date', value: object.date, mappedValue: object},
                {type:"boolean", key: 'boolean', value: object.boolean, mappedValue: object},

                {type:"text", key: 'name', value: object.sub.name, mappedValue: object.sub},
                {type:"number", key: 'number', value: object.sub.number, mappedValue: object.sub},
                {type:"date", key: 'date', value: object.sub.date, mappedValue: object.sub},
                {type:"boolean", key: 'boolean', value: object.sub.boolean, mappedValue: object.sub},
            ]]);
            panel1.set(table);

            var panel2 = new Panel.Panel("Panel3", "table test");

            panel2.set(new Button.Button("test", '', function(){
                alert('button works');
            }));

            popup.append(panel);
            popup.append(panel1);
            popup.append(panel2);
            popup.show();
        });
    </script>
</head>
<body>

</body>
</html>